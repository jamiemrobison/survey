@views::view('shared/header.cshtml')

				<script type="text/javascript">
					function addNewChoice() {
						$l.dom.append(
							$l.dom.selectSingle('#options'),
							'<li>Option <span class="number"></span>: <input type="text" name="options[]" value="" /> <select name="optiontypes[]">@string::squote(html::selectOptions(statics::$questionoptiontypes))</select> <a class="remove" href="#">Remove</a></li>'
						);

						renumber();
						return false;
					}

					function removeChoice(e, it) {
						$l.dom.remove(it.parentElement);

						renumber();
						return false;
					}
					
					function renumber() {
						var nodes = $l.dom.select('#options li');
						for(i = 0; i < nodes.length; i++) {
							$l.dom.selectSingle('.number', nodes[i]).innerText = (i + 1);
							$l.dom.setEvent($l.dom.selectSingle('.remove', nodes[i]), 'click', removeChoice);
						}
					}

					function formSubmit() {
						var activeElement = $l.dom.selectSingle('.tabs li a.selected');

						switch(activeElement.getAttribute('rel')) {
						case 'tab_1':
							$l.dom.selectSingle('#questionType').value = '';
							break;
						case 'tab_2':
							$l.dom.selectSingle('#questionType').value = '@statics::QUESTION_EVALUATION';
							break;
						case 'tab_3':
							$l.dom.selectSingle('#questionType').value = '@statics::QUESTION_MULTIPLE';
							break;
						case 'tab_4':
							$l.dom.selectSingle('#questionType').value = '@statics::QUESTION_FILL';
							break;
						}
					}

					$l.ready(function() {
						$l.ui.autocomplete(
							$('#query'),
							{
								delay: 0,
								minLength: 0,
								source: @json_encode($querySuggestions),
								labelfieldname: 'label',
								hiddenfield: $('#queryhidden'),
								hiddenfieldname: 'value',
								alllist: true
							}
						);

						$l.dom.setEvent($l.dom.selectSingle('#addnewchoice'), 'click', addNewChoice);
						renumber();

						$l.dom.setEvent($l.dom.selectSingle('#addQuestion'), 'submit', formSubmit);
					});
				</script>

                <!-- Breadcrumbs, Page Title -->
                <div id="page-head">
                    <h1>Survey Questions</h1>
                    <ul id="breadcrumbs">
                        <li><a href="@mvc::url('home/index')">Home</a></li>
                        <li><a href="@mvc::url('surveys/index')">Surveys</a></li>
						<li>Questions</li>
						<li>@$survey['title']</li>
                    </ul>
                </div>
                
				@if(session::existsFlash('notification')) {
					@{ $notification = session::getFlash('notification'); }
					<div class="msg@$notification[0]">
					   <p>@$notification[1]</p>
					</div>
				}

				<!-- Page Content Start -->
                <div class="full-page-text">

                    <h3>Add Question</h3>
                    <form id="addQuestion" method="post" action="@mvc::url('surveys/questions')">
						<input id="questionType" type="hidden" name="type" value="@statics::QUESTION_EVALUATION" />

						<div class="marginTop20px tabs_table">
							<ul class="tabs">
								<li><a rel="tab_1">Question Pool</a></li>
								<li><a rel="tab_2">Evaluation</a></li>
								<li><a rel="tab_3">Multiple Choices</a></li>
								<li><a rel="tab_4">Fill In The Blanks</a></li>
							</ul>
							<div class="panes">
								<div id="tab_1" class="tab-content">
									<table class="cellpadding4px" width="100%" border="0" cellspacing="0" cellpadding="0">
										<tr>
											<td class="width200px"><label id="title_content1" for="content1">Question *</label></td>
											<td>
												<input id="query" type="text" size="50" id="content1" name="content1" value="" data-defaulttext="Type to search from question pool" />
												<input id="queryhidden" type="hidden" name="query" value="" />
											</td>
										</tr>
									</table>
								</div>
								<div id="tab_2" class="tab-content">
									<table class="cellpadding4px" width="100%" border="0" cellspacing="0" cellpadding="0">
										<tr>
											<td class="width200px"><label id="title_content2" for="content2">Question *</label></td>
											<td><input type="text" size="50" id="content2" name="content2" value="" data-defaulttext="Type your question here" /></td>
										</tr>
										<tr>
											<td><label id="isshared_label2" for="isshared2">Accessibility *</label></td>
											<td><select name="isshared2">@html::selectOptions(statics::$sharedboolean, statics::SHARE_SHARED)</select></td>
										</tr>
									</table>

									<ul class="marginTop10px l-child">
										<li>Strongly Agree</li>
										<li>Agree</li>
										<li>Neutral</li>
										<li>Disagree</li>
										<li>Strongly Disagree</li>
									</ul>
								</div>
								<div id="tab_3" class="tab-content">
									<table class="cellpadding4px" width="100%" border="0" cellspacing="0" cellpadding="0">
										<tr>
											<td class="width200px"><label id="title_content3" for="content3">Question *</label></td>
											<td><input type="text" size="50" id="content3" name="content3" value="" data-defaulttext="Type your question here" /></td>
										</tr>
										<tr>
											<td><label id="isshared_label3" for="isshared3">Accessibility *</label></td>
											<td><select name="isshared3">@html::selectOptions(statics::$sharedboolean, statics::SHARE_SHARED)</select></td>
										</tr>
									</table>

									<a id="addnewchoice" href="#">Add New Choice</a>
									<ul class="marginTop10px arrow l-child" id="options">
										<li>
											Option <span class="number"></span>: <input type="text" name="options[]" value="" />
											<select name="optiontypes[]">@html::selectOptions(statics::$questionoptiontypes)</select>
											<a class="remove" href="#">Remove</a>
										</li>
									</ul>
								</div>
								<div id="tab_4" class="tab-content">
									<table class="cellpadding4px" width="100%" border="0" cellspacing="0" cellpadding="0">
										<tr>
											<td class="width200px"><label id="title_content4" for="content4">Question *</label></td>
											<td><input type="text" size="50" id="content4" name="content4" value="" data-defaulttext="Type your question here" /></td>
										</tr>
										<tr>
											<td><label id="isshared_label4" for="isshared4">Accessibility *</label></td>
											<td><select name="isshared4">@html::selectOptions(statics::$sharedboolean, statics::SHARE_SHARED)</select></td>
										</tr>
									</table>

									<ul class="marginTop10px l-child">
									@foreach(html::radioOptionsArray('typefilter', statics::$questiontypefilters, '0') as $option) {
										<li>@$option</li>
									}
									</ul>
								</div>
							</div>
							<p class="alignRight"><input type="submit" value="Add Question" /></p>
						</div>
					</form>
					
				</div>
                <!-- Page Content End -->
    
@views::view('shared/footer.cshtml')