@views::view('shared/header.cshtml')

				<script type="text/javascript">
					function addNewChoice() {
						$l.dom.append(
							$l.dom.selectSingle('#options'),
							'<li>Option <span class="number"></span>: <input type="text" name="options[]" value="" /> <select name="optionstypes[]">@string::squote(html::selectOptions(statics::$questionoptiontypes))</select> <a class="remove" href="#">Remove</a></li>'
						);

						renumber();
						return false;
					}

					function removeChoice(e, it) {
						$l.dom.remove(it.parentElement);

						renumber();
						return false;
					}
					
					function renumber() {
						var nodes = $l.dom.select('#options li');
						for(i = 0; i < nodes.length; i++) {
							$l.dom.selectSingle('.number', nodes[i]).innerText = (i + 1);
							$l.dom.setEvent($l.dom.selectSingle('.remove', nodes[i]), 'click', removeChoice);
						}
					}

					function formSubmit() {
						var activeElement = $l.dom.selectSingle('.tabs li a.selected');

						switch(activeElement.getAttribute('rel')) {
						case 'tab_1':
							$l.dom.selectSingle('#questionType').value = '@statics::QUESTION_EVALUATION';
							break;
						case 'tab_2':
							$l.dom.selectSingle('#questionType').value = '@statics::QUESTION_MULTIPLE';
							break;
						case 'tab_3':
							$l.dom.selectSingle('#questionType').value = '@statics::QUESTION_FILL';
							break;
						}
					}
					
					$l.ready(function() {
						$l.dom.setEvent($l.dom.selectSingle('#addnewchoice'), 'click', addNewChoice);
						renumber();

						$l.dom.setEvent($l.dom.selectSingle('#editQuestion'), 'submit', formSubmit);
					});
				</script>

                <!-- Breadcrumbs, Page Title -->
                <div id="page-head">
                    <h1>Create New Questions</h1>
                    <ul id="breadcrumbs">
                        <li><a href="@mvc::url('home/index')">Home</a></li>
                        <li><a href="@mvc::url('questions/index')">Questions</a></li>
                        <li>@$question['content']</li>
                    </ul>
                </div>
                
                <!-- Start Page Content -->
                <div class="full-page-text">

                    <p>Day blushes visitor end company old prevent chapter. Consider declared expenses concerns. Indulgence conviction particular unsatiable boisterous discretion. Direct enough off others say eldest may exeter she. Possible all ignorant supplied get settling marriage recurred.</p>
                    
                    <h3>Edit Question</h3>
                    <form id="editQuestion" method="post" action="@mvc::url('questions/edit/' . $question['questionid'])">
						<input id="questionType" type="hidden" name="type" value="@$question['type']" />

						<p>You can add new survey to system by using this page easly.</p>
						<p>Question : <input type="text" name="question" value="@$question['content']" data-defaulttext="Type your question here" /></p>

						<div class="tabs_table">
							<ul class="tabs">
								<li><a rel="tab_1"@{ if($question['type'] == statics::QUESTION_EVALUATION) { echo ' class="selected"'; } }>Evaluation</a></li>
								<li><a rel="tab_2"@{ if($question['type'] == statics::QUESTION_MULTIPLE) { echo ' class="selected"'; } }>Multiple Choices</a></li>
								<li><a rel="tab_3"@{ if($question['type'] == statics::QUESTION_FILL) { echo ' class="selected"'; } }>Fill In The Blanks</a></li>
							</ul>
							<div class="panes">
								<div id="tab_1" class="tab-content">
									<ul class="l-child">
										<li>Strongly Agree</li>
										<li>Agree</li>
										<li>Neutral</li>
										<li>Disagree</li>
										<li>Strongly Disagree</li>
									</ul>
								</div>
								<div id="tab_2" class="tab-content">
									<a id="addnewchoice" href="#">Add New Choice</a>
									<ul class="arrow l-child" id="options">
									@foreach($questionchoices as $questionchoice) {
										<li>
											Option <span class="number"></span>: <input type="text" name="options[@$questionchoice['questionchoiceid']]" value="@$questionchoice['content']" />
											<select name="optionstypes[@$questionchoice['questionchoiceid']]">@html::selectOptions(statics::$questionoptiontypes)</select>
											<a class="remove" href="#">Remove</a>
										</li>
									}
									</ul>
								</div>
								<div id="tab_3" class="tab-content">
									<ul class="l-child">
									@foreach(html::radioOptionsArray('typefilter', statics::$questiontypefilters, $question['typefilter']) as $option) {
										<li>@$option</li>
									}
									</ul>
								</div>
							</div>
							<p class="alignRight"><input type="submit" value="Edit Question" /></p>
						</div>
                    </form>
                    
                </div>
                <!-- Page Content End -->
    
@views::view('shared/footer.cshtml')